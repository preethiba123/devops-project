<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Adopt a Pet</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header><h1>Adopt a Pet</h1><nav><a href="/">Home</a></nav></header>
  <main>
    <section class="form-wrap">
      <form id="adoptForm" method="post" action="/api/adopt">
        <label>Full Name <input name="name" required /></label>
        <label>Email <input name="email" type="email" required /></label>
        <label>Pet
          <select name="petId" id="petSelect" required></select>
        </label>
        <button type="submit" class="btn">Submit Adoption</button>
      </form>
      <div id="msg"></div>
    </section>
  </main>
  <footer>© 2025 My Pet World</footer>

  <script>
    async function loadPets(){
      const res = await fetch('/api/pets');
      const pets = await res.json();
      const sel = document.getElementById('petSelect');
      sel.innerHTML = pets.map(p => `<option value="${p.id}">${p.name} — ${p.type}</option>`).join('');
      // preselect from query ?
      const params = new URLSearchParams(location.search);
      const petId = params.get('petId');
      if(petId) sel.value = petId;
      if(params.get('success')) document.getElementById('msg').innerText = 'Thank you! Adoption request received.';
    }
    loadPets();
  </script>
</body>
</html>
